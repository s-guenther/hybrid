Quickstart
==========

This guide will briefly discuss the user relevant functions of this
toolbox. These are:

```matlab
    hybridset
    gen_signal
    gen_storages
    hybrid
    eco
    sim_operation
```

Except for the first one, they all come with a corresponding plotting
function:

```matlab
    plot_signal
    plot_storages
    plot_hybrid
    plot_eco
    plot_operation
```

To get a full description, use the matlab help function:

```matlab
    help <function_name>
```

The program structure is illustrated in `$HYBRID/docs/program_structure.svg`.


Setup
-----

- Start matlab
- change directory to project root folder `cd ~/hybrid`
- add folder to path:

```matlab
    path(path, genpath(cd))
```


Generating Options Structure
----------------------------

First, an options structure can be generated with `hybridset`. This
function is similar to `odeset` or `optimset` and manages all settings of
this toolbox. The returned structure can be passed to all following
functions as the last parameter, but it is optional and default values will
be used if not provided. It takes a list of name - value pairs as input,
e.g.

```matlab
    opt = hybridset('verbose', 1, 'cut', 0:0.1:1)
```

This will display some status messages during the calculation and defines
at which points the main calculation will be executed. See help for all
name - value pairs.


Generating a Signal Structure
-----------------------------

To ensure consistent and valid input data for the calculations, a signal
structure must be generated that will be validated during the process.
Signals can either be generated as a function handle:

```matlab
    signal = gen_signal(fcn_handle, period)
```

e.g.

```matlab
    signal = gen_signal(@(t) sin(t) + 3*sin(5*t), 2*pi)
```

Or as a time series:

```matlab
    signal = gen_signal(time_vec, value_vec)
```

e.g.

```matlab
    signal = gen_signal(1:6, [1 2 1 -2 -1 -1])
```

As an optional third argument, the `type` can be provided: `'step'` or
`'linear'`, depending which interpolation is desired between the values.
Defaults for time series signals to `'step'`, for function handle signals
it defaults to `'fhandle'`.

The input data must satisfy the following conditions:
- arithmetic mean must be zero
- integral must be zero at beginning and end
- integral must be larger than or equal to zero for all times

The signals will be plotted by default at the end (when no options
structure through `hybridset()` is provided).


Calculating Hybridisation Diagram
---------------------------------

This is the main calculation routine. It is simply invoked by

```matlab
    hybdata = hybrid(signal)
```

where `signal` is the previously generated signal struct by `gen_signal()`.

By default, the hybridisation diagram will be plotted at the end of the
calculation.


Viewing Power and SOC over time
-------------------------------

If you want to view the power flow of base and peak storage over time, you
can do so for a specific power cut (or dimensioning) with

```matlab
    sim_results = sim_operation(signal, cut)
```

where `signal` is -again- generated by `gen_signal()` and `cut` must be
between `0` and `1`.

As an optional third parameter, the `strategy` can be provided. It can be
`inter` or `nointer` and defaults to `inter`. This defines whether and
inter-storage power flow is considered or not.

By default, the results will be plotted at the end of the calculation.


Analyzing Storage Combinations
------------------------------

A simple cost estimation and potential analysis can be perfomed with

```matlab
    eco_results = eco(hybdata, storages)
```

where `hybdata` is generated by `hybrid()` and storages by
`gen_storages()` with the following syntax:

```matlab
    storages = gen_storages(spec_powers, prices, names)
```

Here, `spec_powers` is a vector of specific powers of the storages,
`prices` the corresponding prices and `names` is a cell array of strings.
`prices` and `names` ar optional. Following, in the simplest form a storage
structure can be exemplarily generated by

```matlab
    storages = gen_storages([1, 2, 5, 10])
```

By default, the results of `eco()` will be plotted at the end of the
calculation.


Combining Hybridisation Calculation and Storage Selection
---------------------------------------------------------

The previously described economical analysis can also be simultaneously
performed by calling the main calculation routine `hybrid` with an
additional `storages` parameter with the following syntax:

```matlab
    [hybdata, ecodata] = hybrid(signal, storages)
```

Then, `eco` will be implicitely called and the results are plotted in a
combined diagram by default.


Samples
-------

The functions

```matlab
    sample_signals
    rand_signal
    pulsed_signal
```

can be used to build predefined signals for testing and demonstration purposes.
Please refer to the adequate help pages for further information.

The script

```matlab
    minimal
```

is a ready to use and executable example which implements the functionality
described in this quickstart guide (execute `path(path, genpath(cd))` in
advance).
